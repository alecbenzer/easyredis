<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>File: README</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>EasyRedis</h1>

<p>EasyRedis is a simple ruby framework designed to make using Redis as a database simpler.</p>

<p>Redis is a very fast key-value store that supports data structures like lists, (sorted) sets, and hashes, but because of its simplicity, using Redis to store traditional database data can be somewhat tedious. EasyRedis streamlines this process.</p>

<h2>Installation</h2>

<p>You can just grab the gem and you're good to go:</p>

<pre class="code">$ gem install easyredis
</pre>

<p>Or, you can get the source with git:</p>

<pre class="code">$ git clone git://github.com/alecbenzer/easyredis.git
</pre>

<p>or just download and extract a tar archive with the Downloads button.</p>

<p>Once you have the source, you can run:</p>

<pre class="code">$ rake manifest
$ rake build_gemspec
$ rake install easyredis.gemspec
</pre>

<h2>Basics</h2>

<p>First, create a simple model:</p>

<pre class="code"><span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>easyredis</span><span class='tstring_end'>'</span></span>

<span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'>EasyRedis</span><span class='op'>::</span><span class='const'>Model</span>
  <span class='id field'>field</span> <span class='symbol'>:title</span>
  <span class='id field'>field</span> <span class='symbol'>:body</span>
<span class='kw'>end</span>

<span class='const'>EasyRedis</span><span class='period'>.</span><span class='id connect'>connect</span>
</pre>

<p>This creates a Post model and connects to a redis server running on localhost on the default port (you can pass options to EasyRedis.connect like you would to Redis.new)</p>

<p>We can now make post objects:</p>

<pre class="code"><span class='id p'>p</span> <span class='op'>=</span> <span class='const'>Post</span><span class='period'>.</span><span class='id new'>new</span>
<span class='id p'>p</span><span class='period'>.</span><span class='id title'>title</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>My First Post</span><span class='tstring_end'>&quot;</span></span>
<span class='id p'>p</span><span class='period'>.</span><span class='id body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is my very first post!</span><span class='tstring_end'>&quot;</span></span>
</pre>

<p>Posts are automatically given ids that we can then use to retrive them:</p>

<pre class="code"><span class='id id'>id</span> <span class='op'>=</span> <span class='id p'>p</span><span class='period'>.</span><span class='id id'>id</span>
<span class='id p'>p</span> <span class='op'>=</span> <span class='const'>Post</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='id id'>id</span><span class='rparen'>)</span>
<span class='id p'>p</span><span class='period'>.</span><span class='id title'>title</span>  <span class='comment'># =&gt; &quot;My First Post&quot;
</span></pre>

<p>We also get a created_at field for free that we can sort by.</p>

<pre class="code"><span class='id p'>p</span><span class='period'>.</span><span class='id created_at'>created_at</span>  <span class='comment'># a ruby Time object
</span><span class='const'>Post</span><span class='period'>.</span><span class='id all'>all</span>  <span class='comment'># get all posts, ordered by creation time
</span><span class='const'>Post</span><span class='period'>.</span><span class='id all'>all</span> <span class='symbol'>:order</span> <span class='op'>=&gt;</span> <span class='symbol'>:desc</span>  <span class='comment'># specifying an order option
</span></pre>

<h2>Searching and Sorting</h2>

<p>We can also tell EasyRedis to optimize sorting and searching on certain fields. If we had defined Post as:</p>

<pre class="code"><span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'>EasyRedis</span><span class='op'>::</span><span class='const'>Model</span>
  <span class='id field'>field</span> <span class='symbol'>:title</span>
  <span class='id field'>field</span> <span class='symbol'>:body</span>

  <span class='id sort_on'>sort_on</span> <span class='symbol'>:title</span>
<span class='kw'>end</span>
</pre>

<p>We can now sort our posts by title:</p>

<pre class="code"><span class='const'>Post</span><span class='period'>.</span><span class='id sort_by'>sort_by</span> <span class='symbol'>:title</span><span class='comma'>,</span> <span class='symbol'>:order</span> <span class='op'>=&gt;</span> <span class='symbol'>:desc</span>
</pre>

<p>And also search:</p>

<pre class="code"><span class='const'>Post</span><span class='period'>.</span><span class='id search_by'>search_by</span> <span class='symbol'>:title</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A common title</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># all posts with this title
</span><span class='const'>Post</span><span class='period'>.</span><span class='id find_by'>find_by</span> <span class='symbol'>:title</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>My First Post</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># just one post
</span></pre>

<h2>Text Search and Completions</h2>

<p>We could have defined Post like this:</p>

<pre class="code"><span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'>EasyRedis</span><span class='op'>::</span><span class='const'>Model</span>
  <span class='id field'>field</span> <span class='symbol'>:title</span>
  <span class='id field'>field</span> <span class='symbol'>:body</span>

  <span class='id text_search'>text_search</span> <span class='symbol'>:title</span>
<span class='kw'>end</span>
</pre>

<p>Now we can perform text searches and completions against our title field:</p>

<pre class="code"><span class='const'>Post</span><span class='period'>.</span><span class='id matches'>matches</span><span class='lparen'>(</span><span class='symbol'>:title</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fir</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'># titles that begin with &quot;Fir&quot;
</span><span class='const'>Post</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='symbol'>:title</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'># posts whose titles contain &quot;First&quot;
</span></pre></div></div>
    
    <div id="footer">
  Generated on Mon Feb  7 20:44:24 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.4 (ruby-1.9.2).
</div>

  </body>
</html>