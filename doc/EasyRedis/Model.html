<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: EasyRedis::Model</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (M)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../EasyRedis.html" title="EasyRedis (module)">EasyRedis</a></span></span>
     &raquo; 
    <span class="title">Model</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: EasyRedis::Model
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">EasyRedis::Model</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/easyredis.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
class representing a data model you want to store in redis
</p>


  </div>
</div>
<div class="tags">
  
</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="sorts-classvariable" class="">@@sorts =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="text_searches-classvariable" class="">@@text_searches =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">- (Object) <strong>id</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
the id of this entry.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-class_method" title="[] (class method)">+ (Object) <strong>[]</strong>(index, amt = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
access entries of this model based on time.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all-class_method" title="all (class method)">+ (Object) <strong>all</strong>(options = {:order =&gt; :asc}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
get all instances of this model ordered by creation time.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count-class_method" title="count (class method)">+ (Object) <strong>count</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
returns number of instances of this model.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy_all-class_method" title="destroy_all (class method)">+ (Object) <strong>destroy_all</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
destroy all instances of this model.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#field-class_method" title="field (class method)">+ (Object) <strong>field</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
add a field to the model.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find-class_method" title="find (class method)">+ (Object) <strong>find</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
find an entry of this model based on its id.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by-class_method" title="find_by (class method)">+ (Object) <strong>find_by</strong>(field, val) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
get the first entry where field matches val.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first-class_method" title="first (class method)">+ (Object) <strong>first</strong>(n = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
same as calling self.all.first.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last-class_method" title="last (class method)">+ (Object) <strong>last</strong>(n = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
same as calling self.all.last.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match-class_method" title="match (class method)">+ (Object) <strong>match</strong>(field, str, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
searches for all entries where field contains the string str.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matches-class_method" title="matches (class method)">+ (Object) <strong>matches</strong>(field, str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
gives all values for the given field that begin with str.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rand-class_method" title="rand (class method)">+ (Object) <strong>rand</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
returns a random entry of this model.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-class_method" title="search (class method)">+ (Object) <strong>search</strong>(params) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
search the model based on multiple parameters.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_by-class_method" title="search_by (class method)">+ (Object) <strong>search_by</strong>(field, val, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
get all entries where field matches val.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sort_by-class_method" title="sort_by (class method)">+ (Object) <strong>sort_by</strong>(field, options = {:order =&gt; :asc}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
get all entries, sorted by the given field.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sort_on-class_method" title="sort_on (class method)">+ (Object) <strong>sort_on</strong>(field) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
index a field to be sorted/searched.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sortable%3F-class_method" title="sortable? (class method)">+ (Boolean) <strong>sortable?</strong>(field) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
indicates whether field has been indexed with sort_on.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#text_search-class_method" title="text_search (class method)">+ (Object) <strong>text_search</strong>(field) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
index a field for text searching.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#text_search%3F-class_method" title="text_search? (class method)">+ (Boolean) <strong>text_search?</strong>(field) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
indicates whether field has been indexed with text_search.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(field) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
directly access a field of this entry&#8217;s redis hash.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">- (Object) <strong>[]=</strong>(field, val) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
directly change a field of this entry&#8217;s redis hash.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear-instance_method" title="#clear (instance method)">- (Object) <strong>clear</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
clears all fields, causing future gets to reretrive them from redis.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#created_at-instance_method" title="#created_at (instance method)">- (Object) <strong>created_at</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
get the creation time of an entry.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
remove the entry.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Model) <strong>initialize</strong>(id = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
create a new instance of this model.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#key_name-instance_method" title="#key_name (instance method)">- (Object) <strong>key_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
returns the key name of this entry&#8217;s redis hash.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="EasyRedis::Model (class)">Model</a></span></tt>) <strong>initialize</strong>(id = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
create a new instance of this model
</p>
<p>
If no id is passed, one is generated for you. Otherwise, sets the id field
to the passed id, but does not check to see if it is a valid id for this
model. Users should use find when retiving models by id, as these check for
valid ids.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


401
402
403
404
405
406
407
408
409</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 401</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id id'>id</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id id'>id</span>
    <span class='ivar'>@id</span> <span class='op'>=</span> <span class='id id'>id</span>
  <span class='kw'>else</span>
    <span class='ivar'>@id</span> <span class='op'>=</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id incr'>incr</span><span class='lparen'>(</span><span class='id prefix'>prefix</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:next_id</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zadd'>zadd</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='comma'>,</span><span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span><span class='ivar'>@id</span><span class='rparen'>)</span>
    <span class='ivar'>@id</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="id-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="id-instance_method">
  
    - (<tt>Object</tt>) <strong>id</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
the id of this entry
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 394</span>

<span class='kw'>def</span> <span class='id id'>id</span>
  <span class='ivar'>@id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="[]-class_method">
  
    + (<tt>Object</tt>) <strong>[]</strong>(index, amt = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
access entries of this model based on time
</p>
<p>
same as calling self.all.[]
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 311</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='op'>[]</span><span class='lparen'>(</span><span class='id index'>index</span><span class='comma'>,</span><span class='id amt'>amt</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id all'>all</span><span class='lbracket'>[</span><span class='id index'>index</span><span class='comma'>,</span><span class='id amt'>amt</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="all-class_method">
  
    + (<tt>Object</tt>) <strong>all</strong>(options = {:order =&gt; :asc}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
get all instances of this model ordered by creation time
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 278</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id all'>all</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:order</span> <span class='op'>=&gt;</span> <span class='symbol'>:asc</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id sort_by'>sort_by</span> <span class='symbol'>:created_at</span><span class='comma'>,</span> <span class='id options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="count-class_method">
  
    + (<tt>Object</tt>) <strong>count</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
returns number of instances of this model
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


272
273
274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 272</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id count'>count</span>
  <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zcard'>zcard</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="destroy_all-class_method">
  
    + (<tt>Object</tt>) <strong>destroy_all</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
destroy all instances of this model
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


384
385
386
387
388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 384</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id destroy_all'>destroy_all</span>
  <span class='id all'>all</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id x'>x</span><span class='op'>|</span> <span class='id x'>x</span><span class='period'>.</span><span class='id destroy'>destroy</span><span class='rbrace'>}</span>
  <span class='cvar'>@@sorts</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id field'>field</span><span class='op'>|</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id del'>del</span><span class='lparen'>(</span><span class='id sort_key'>sort_key</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='cvar'>@@text_searches</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id field'>field</span><span class='op'>|</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id del'>del</span><span class='lparen'>(</span><span class='id terms_key'>terms_key</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id del'>del</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='rparen'>)</span>
  <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id del'>del</span><span class='lparen'>(</span><span class='id prefix'>prefix</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:next_id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="field-class_method">
  
    + (<tt>Object</tt>) <strong>field</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
add a field to the model
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <span class='name'>name</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a symbol representing the name of the field
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 222</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id field'>field</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='cvar'>@@fields</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='cvar'>@@fields</span> <span class='op'>&lt;&lt;</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
  <span class='id name'>name</span> <span class='op'>=</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='id getter'>getter</span> <span class='op'>=</span> <span class='id name'>name</span>
  <span class='id setter'>setter</span> <span class='op'>=</span> <span class='id name'>name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span>
  <span class='id instance_var'>instance_var</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>@</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id name'>name</span>

  <span class='id define_method'>define_method</span> <span class='id getter'>getter</span><span class='period'>.</span><span class='id to_sym'>to_sym</span> <span class='kw'>do</span>
    <span class='id prev'>prev</span> <span class='op'>=</span> <span class='id instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='id instance_var'>instance_var</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id prev'>prev</span>
      <span class='id prev'>prev</span>
    <span class='kw'>else</span>
      <span class='id instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='id instance_var'>instance_var</span><span class='comma'>,</span><span class='const'>Marshal</span><span class='period'>.</span><span class='id load'>load</span><span class='lparen'>(</span><span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id hget'>hget</span><span class='lparen'>(</span><span class='id key_name'>key_name</span><span class='comma'>,</span><span class='id name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id define_method'>define_method</span> <span class='id setter'>setter</span><span class='period'>.</span><span class='id to_sym'>to_sym</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id val'>val</span><span class='op'>|</span>
    <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id hset'>hset</span><span class='lparen'>(</span><span class='id key_name'>key_name</span><span class='comma'>,</span><span class='id name'>name</span><span class='comma'>,</span><span class='const'>Marshal</span><span class='period'>.</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id val'>val</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='id instance_var'>instance_var</span><span class='comma'>,</span><span class='id val'>val</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id sortable?'>sortable?</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
      <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zadd'>zadd</span><span class='lparen'>(</span><span class='id sort_key'>sort_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span><span class='const'>EasyRedis</span><span class='period'>.</span><span class='id score'>score</span><span class='lparen'>(</span><span class='id val'>val</span><span class='rparen'>)</span><span class='comma'>,</span><span class='ivar'>@id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id text_search?'>text_search?</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
      <span class='id val'>val</span><span class='period'>.</span><span class='id split'>split</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id term'>term</span><span class='op'>|</span>
        <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zadd'>zadd</span> <span class='id term_key'>term_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span><span class='id term'>term</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id created_at'>created_at</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='id id'>id</span>
        <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zadd'>zadd</span> <span class='id terms_key'>terms_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id score'>score</span><span class='lparen'>(</span><span class='id term'>term</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id term'>term</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find-class_method">
  
    + (<tt>Object</tt>) <strong>find</strong>(id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
find an entry of this model based on its id
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <span class='name'>id</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the id of the entry to retrive
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 300</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='id id'>id</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zscore'>zscore</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='comma'>,</span><span class='id id'>id</span><span class='rparen'>)</span>
    <span class='id new'>new</span><span class='lparen'>(</span><span class='id id'>id</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find_by-class_method">
  
    + (<tt>Object</tt>) <strong>find_by</strong>(field, val) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
get the first entry where field matches val
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 330</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id find_by'>find_by</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span><span class='id val'>val</span><span class='rparen'>)</span>
  <span class='id search_by'>search_by</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span><span class='id val'>val</span><span class='comma'>,</span><span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="first-class_method">
  
    + (<tt>Object</tt>) <strong>first</strong>(n = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
same as calling self.all.first
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 283</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id first'>first</span><span class='lparen'>(</span><span class='id n'>n</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id all'>all</span><span class='period'>.</span><span class='id first'>first</span><span class='lparen'>(</span><span class='id n'>n</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="last-class_method">
  
    + (<tt>Object</tt>) <strong>last</strong>(n = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
same as calling self.all.last
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


288
289
290</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 288</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id last'>last</span><span class='lparen'>(</span><span class='id n'>n</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id all'>all</span><span class='period'>.</span><span class='id last'>last</span><span class='lparen'>(</span><span class='id n'>n</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="match-class_method">
  
    + (<tt>Object</tt>) <strong>match</strong>(field, str, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
searches for all entries where field contains the string str
</p>
<p>
The string must appear exactly as a term in field&#8217;s value. To search
based on the beginning of a term, you can combine this method with matches.
The field must have been indexed with text_search.
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="FieldNotTextSearchable.html" title="EasyRedis::FieldNotTextSearchable (class)">EasyRedis::FieldNotTextSearchable</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


367
368
369
370
371</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 367</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span><span class='id str'>str</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>EasyRedis</span><span class='op'>::</span><span class='const'>FieldNotTextSearchable</span><span class='comma'>,</span> <span class='id filename'>filename</span> <span class='kw'>unless</span> <span class='id text_search?'>text_search?</span> <span class='id field'>field</span>
  <span class='id ids'>ids</span> <span class='op'>=</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zrange'>zrange</span><span class='lparen'>(</span><span class='id term_key'>term_key</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span><span class='id str'>str</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='id proc_options'>proc_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id ids'>ids</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id new'>new</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="matches-class_method">
  
    + (<tt>Object</tt>) <strong>matches</strong>(field, str) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
gives all values for the given field that begin with str
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <span class='name'>field</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a symbol representing a field indexed with text_search.
</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="FieldNotTextSearchable.html" title="EasyRedis::FieldNotTextSearchable (class)">FieldNotTextSearchable</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


356
357
358
359
360
361</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 356</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id matches'>matches</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>FieldNotTextSearchable</span><span class='comma'>,</span> <span class='id field'>field</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id text_search?'>text_search?</span> <span class='id field'>field</span>
  <span class='id scr'>scr</span> <span class='op'>=</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id score'>score</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id a'>a</span><span class='comma'>,</span><span class='id b'>b</span> <span class='op'>=</span> <span class='id scr'>scr</span><span class='comma'>,</span> <span class='id scr'>scr</span><span class='op'>+</span><span class='int'>1</span><span class='op'>/</span><span class='lparen'>(</span><span class='float'>27.0</span><span class='op'>**</span><span class='id str'>str</span><span class='period'>.</span><span class='id size'>size</span><span class='rparen'>)</span>
  <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zrangebyscore'>zrangebyscore</span><span class='lparen'>(</span><span class='id terms_key'>terms_key</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id a'>a</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id b'>b</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rand-class_method">
  
    + (<tt>Object</tt>) <strong>rand</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
returns a random entry of this model
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


293
294
295</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 293</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id rand'>rand</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>Kernel</span><span class='period'>.</span><span class='id rand'>rand</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id count'>count</span><span class='rparen'>)</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="search-class_method">
  
    + (<tt>Object</tt>) <strong>search</strong>(params) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
search the model based on multiple parameters
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hahs</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a hash of field => value pairs
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


337
338
339
340
341
342
343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 337</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id search'>search</span><span class='lparen'>(</span><span class='id params'>params</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id search_by'>search_by</span><span class='lparen'>(</span><span class='op'>*</span><span class='id params'>params</span><span class='period'>.</span><span class='id first'>first</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id params'>params</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>1</span>  <span class='comment'># comment out for benchmarking purposes
</span>  <span class='id result_set'>result_set</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id params'>params</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id field'>field</span><span class='comma'>,</span><span class='id value'>value</span><span class='op'>|</span>
    <span class='id scr'>scr</span> <span class='op'>=</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id score'>score</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span>
    <span class='id ids'>ids</span> <span class='op'>=</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zrangebyscore'>zrangebyscore</span><span class='lparen'>(</span><span class='id sort_key'>sort_key</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span><span class='comma'>,</span><span class='id scr'>scr</span><span class='comma'>,</span><span class='id scr'>scr</span><span class='rparen'>)</span>
    <span class='id result_set'>result_set</span> <span class='op'>=</span> <span class='id result_set'>result_set</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='id result_set'>result_set</span> <span class='op'>&amp;</span> <span class='const'>Set</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id ids'>ids</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>Set</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id ids'>ids</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id result_set'>result_set</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="search_by-class_method">
  
    + (<tt>Object</tt>) <strong>search_by</strong>(field, val, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
get all entries where field matches val
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <span class='name'>field</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a symbol representing the field to search on
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'></span>
      
      
        <span class='name'>val</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the value of field to search for
</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="FieldNotSortable.html" title="EasyRedis::FieldNotSortable (class)">EasyRedis::FieldNotSortable</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


319
320
321
322
323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 319</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id search_by'>search_by</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span> <span class='id val'>val</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>EasyRedis</span><span class='op'>::</span><span class='const'>FieldNotSortable</span><span class='comma'>,</span> <span class='id field'>field</span> <span class='kw'>unless</span> <span class='cvar'>@@sorts</span><span class='period'>.</span><span class='id member?'>member?</span> <span class='id field'>field</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
  <span class='id scr'>scr</span> <span class='op'>=</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id score'>score</span><span class='lparen'>(</span><span class='id val'>val</span><span class='rparen'>)</span>
  <span class='comment'># options[:limit] = [0,options[:limit]] if options[:limit]
</span>  <span class='id ids'>ids</span> <span class='op'>=</span> <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zrangebyscore'>zrangebyscore</span><span class='lparen'>(</span><span class='id sort_key'>sort_key</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span><span class='comma'>,</span><span class='id scr'>scr</span><span class='comma'>,</span><span class='id scr'>scr</span><span class='comma'>,</span><span class='id proc_options'>proc_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id ids'>ids</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id new'>new</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sort_by-class_method">
  
    + (<tt>Object</tt>) <strong>sort_by</strong>(field, options = {:order =&gt; :asc}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
get all entries, sorted by the given field
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


349
350
351</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 349</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id sort_by'>sort_by</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span><span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:order</span> <span class='op'>=&gt;</span> <span class='symbol'>:asc</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>EasyRedis</span><span class='op'>::</span><span class='const'>Sort</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:order</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sort_on-class_method">
  
    + (<tt>Object</tt>) <strong>sort_on</strong>(field) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
index a field to be sorted/searched
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 259</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id sort_on'>sort_on</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span>
  <span class='cvar'>@@sorts</span> <span class='op'>&lt;&lt;</span> <span class='id field'>field</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sortable?-class_method">
  
    + (<tt>Boolean</tt>) <strong>sortable?</strong>(field) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
indicates whether field has been indexed with sort_on
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 374</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id sortable?'>sortable?</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span>
  <span class='cvar'>@@sorts</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='cvar'>@@sorts</span><span class='period'>.</span><span class='id member?'>member?</span> <span class='id field'>field</span> <span class='kw'>or</span> <span class='id field'>field</span><span class='period'>.</span><span class='id to_sym'>to_sym</span> <span class='op'>==</span> <span class='symbol'>:created_at</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="text_search-class_method">
  
    + (<tt>Object</tt>) <strong>text_search</strong>(field) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
index a field for text searching
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


266
267
268
269</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 266</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id text_search'>text_search</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span>
  <span class='cvar'>@@text_searches</span> <span class='op'>&lt;&lt;</span> <span class='id field'>field</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
  <span class='id sort_on'>sort_on</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id sortable?'>sortable?</span> <span class='id field'>field</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="text_search?-class_method">
  
    + (<tt>Boolean</tt>) <strong>text_search?</strong>(field) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
indicates whether field has been indexed with text_search
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


379
380
381</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 379</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id text_search?'>text_search?</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span>
  <span class='cvar'>@@text_searches</span> <span class='kw'>and</span> <span class='cvar'>@@text_searches</span><span class='period'>.</span><span class='id member?'>member?</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="[]-instance_method">
  
    - (<tt>Object</tt>) <strong>[]</strong>(field) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
directly access a field of this entry&#8217;s redis hash
</p>
<p>
note that you cannot access created_at or id with these methods
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


419
420
421</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 419</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span>
  <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id hget'>hget</span><span class='lparen'>(</span><span class='id key_name'>key_name</span><span class='comma'>,</span><span class='id field'>field</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="[]=-instance_method">
  
    - (<tt>Object</tt>) <strong>[]=</strong>(field, val) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
directly change a field of this entry&#8217;s redis hash
</p>
<p>
note that you cannot access created_at or id with these methods
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428
429
430
431
432</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 426</span>

<span class='kw'>def</span> <span class='op'>[]=</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span><span class='id val'>val</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id val'>val</span>
    <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id hset'>hset</span><span class='lparen'>(</span><span class='id key_name'>key_name</span><span class='comma'>,</span><span class='id field'>field</span><span class='comma'>,</span><span class='id val'>val</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id hdel'>hdel</span><span class='lparen'>(</span><span class='id key_name'>key_name</span><span class='comma'>,</span><span class='id field'>field</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clear-instance_method">
  
    - (<tt>Object</tt>) <strong>clear</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
clears all fields, causing future gets to reretrive them from redis
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


450
451
452
453
454</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 450</span>

<span class='kw'>def</span> <span class='id clear'>clear</span>
  <span class='cvar'>@@fields</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id field'>field</span><span class='op'>|</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='id field'>field</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='comma'>,</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="created_at-instance_method">
  
    - (<tt>Object</tt>) <strong>created_at</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
get the creation time of an entry
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


412
413
414</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 412</span>

<span class='kw'>def</span> <span class='id created_at'>created_at</span>
  <span class='const'>Time</span><span class='period'>.</span><span class='id at'>at</span><span class='lparen'>(</span><span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zscore'>zscore</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='comma'>,</span><span class='ivar'>@id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="destroy-instance_method">
  
    - (<tt>Object</tt>) <strong>destroy</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
remove the entry
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437
438</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 435</span>

<span class='kw'>def</span> <span class='id destroy'>destroy</span>
  <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id zrem'>zrem</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='comma'>,</span><span class='ivar'>@id</span><span class='rparen'>)</span>
  <span class='const'>EasyRedis</span><span class='period'>.</span><span class='id redis'>redis</span><span class='period'>.</span><span class='id del'>del</span><span class='lparen'>(</span><span class='id key_name'>key_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-instance_method">
  
    - (<tt>Object</tt>) <strong>inspect</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


445
446
447</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 445</span>

<span class='kw'>def</span> <span class='id inspect'>inspect</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@id</span><span class='rbrace'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="key_name-instance_method">
  
    - (<tt>Object</tt>) <strong>key_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
returns the key name of this entry&#8217;s redis hash
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


441
442
443</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/easyredis.rb', line 441</span>

<span class='kw'>def</span> <span class='id key_name'>key_name</span>
  <span class='id prefix'>prefix</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='ivar'>@id</span><span class='period'>.</span><span class='id to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Feb  7 20:44:25 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.4 (ruby-1.9.2).
</div>

  </body>
</html>